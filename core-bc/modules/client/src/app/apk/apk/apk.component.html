
<md-card>

  <md-card-content>

    <div class="action-panel action-panel-right action-panel-top">
      <a *ngIf="admin" routerLink="create" md-fab mdTooltip="Lägg till ny arbetsplatskod"><md-icon>add</md-icon></a>
    </div>

    <md-input-container>
      <input mdInput placeholder="Filtrera" [formControl]="stateCtrl" [(ngModel)]="query">
    </md-input-container>

    <md-checkbox [formControl]="onlyMyDatasCtrl" [(ngModel)]="onlyMyDatas" *ngIf="loggedIn">Visa endast <span class="tooltip-text" mdTooltip="{{usersProdn1sString$ | async}}">mina arbetsplatskoder</span></md-checkbox>
  </md-card-content>

  <md-card-content>
    <table *ngIf="response">
      <thead>
        <tr>
          <th>Prod <button md-icon-button (click)="toggleSort('sorteringskodProd')" [ngClass]="{'sort-field': sort?.field === 'sorteringskodProd', 'asc': sort?.ascending, 'desc': sort?.ascending === false}"><md-icon>arrow_drop_up</md-icon></button> </th>
          <th>Benämning <button md-icon-button (click)="toggleSort('benamning')" [ngClass]="{'sort-field': sort?.field === 'benamning', 'asc': sort?.ascending, 'desc': sort?.ascending === false}"><md-icon>arrow_drop_up</md-icon></button></th>
          <th>Arbetsplatskod</th>
          <th>Reg-datum <button md-icon-button (click)="toggleSort('regDatum')" [ngClass]="{'sort-field': sort?.field === 'regDatum', 'asc': sort?.ascending, 'desc': sort?.ascending === false}"><md-icon>arrow_drop_up</md-icon></button> </th>
          <th>id</th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of response.content">
          <td>{{data.sorteringskodProd}}</td>
          <td>{{data.benamning}}</td>
          <td>{{data.arbetsplatskod}}</td>
          <td>{{data.regDatum}}</td>
          <td>{{data.id}}</td>
          <td><a routerLink="{{data.id}}"><md-icon>folder_open</md-icon></a></td>
          <td><a routerLink="{{data.id}}/edit" *ngIf="userHasEditPermission(data)"><md-icon>edit</md-icon></a></td>
        </tr>
      </tbody>
    </table>
  </md-card-content>
  <md-card-actions *ngIf="response">
    <button *ngIf="response.number > 0" (click)="previousPage()" md-button><md-icon>arrow_back</md-icon> Föregående</button>
    <button (click)="nextPage()" md-button>Nästa <md-icon>arrow_forward</md-icon></button>

    <div *ngIf="response" class="search-summary">
      Visar sida {{response.number + 1}} av {{response.totalPages}}. Totalt antal: {{response.totalElements}}
    </div>
  </md-card-actions>

</md-card>
